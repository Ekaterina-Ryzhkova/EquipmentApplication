@inject ISnackbar Snackbar

<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            Обновить данные
        </MudText>
    </TitleContent>
    <DialogContent>
        <MudContainer>
            <MudItem>
                <MudTextField @bind-Value="equipment.InventoryId" Label="Инвентарный номер" Variant="Variant.Text"></MudTextField>
            </MudItem>
            <MudItem>
                <MudTextField @bind-Value="equipment.FullName" Label="Наименование оборудования" Variant="Variant.Text"></MudTextField>
            </MudItem>
            <MudItem>
                <MudSelect T="int" Label="Выбрать тип" @bind-Value="equipment.TypeId">
                    @foreach (var item in types)
                    {
                        <MudSelectItem T="int" Value="@item.Id">@item.TypeName</MudSelectItem>
                    }
                </MudSelect>
            </MudItem>
            <MudItem>
                <MudTextField @bind-Value="equipment.Model" Label="Модель" Variant="Variant.Text"></MudTextField>
            </MudItem>
            <MudItem>
                <MudDatePicker @bind-Date="equipment.DeliveryDate" DateFormat="dd.MM.yyyy" Label="Дата"></MudDatePicker>
            </MudItem>
            <MudItem>
                <MudTextField @bind-Value="equipment.StorageLocation" Label="Место хранения" Variant="Variant.Text"></MudTextField>
            </MudItem>
            <MudItem>
                <MudTextField @bind-Value="equipment.DestinationLocation" Label="Место назначения" Variant="Variant.Text"></MudTextField>
            </MudItem>
            <MudItem>
                <MudSelect T="int" Label="Ответственное  лицо" @bind-Value="equipment.PersonId">
                    @foreach (var item in people)
                    {
                        <MudSelectItem T="int" Value="@item.Id">@item.FullName</MudSelectItem>
                    }
                </MudSelect>
            </MudItem>
            <MudItem>
                <MudTextField @bind-Value="equipment.Comment" Label="Комментарий" Variant="Variant.Text"></MudTextField>
            </MudItem>
        </MudContainer>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">Отменить</MudButton>
        <MudButton Color="Color.Primary" OnClick="UpdateData">Обновить</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] MudDialogInstance MudDialog { get; set; }

    [Parameter] public Equipment equipment { get; set; } = new Equipment();
    [Parameter] public List<TypeEquipment> types { get; set; } = new List<TypeEquipment>();
    [Parameter] public List<ResponsePerson> people { get; set; } = new List<ResponsePerson>();

    private void Cancel()
    {
        MudDialog.Cancel();
    }

    private void UpdateData()
    {
        equipmentService.Update(equipment);
        Snackbar.Add("Данные обновлены", Severity.Success);
        MudDialog.Close(DialogResult.Ok(equipment.Id));
    }
}
