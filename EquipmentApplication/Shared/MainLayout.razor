@inherits LayoutComponentBase
@inject NavigationManager NavManager

<PageTitle>EquipmentApplication</PageTitle>

<div class="page">
    <main>
        <MudLayout>
            <MudAppBar Elevation="1" Dense="false">
                <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@ToggleSidebar" />
                <MudSpacer />
                <MudButtonGroup Color="Color.Primary" Variant="Variant.Filled" DisableElevation="true" OverrideStyles="true">
                    <AuthorizeView>
                        <Authorized>
                            <MudButton Href="/Identity/Account/Logout">Выход</MudButton>
                        </Authorized>
                        <NotAuthorized>
                            <MudButton Href="/Identity/Account/Login">Вход</MudButton>
                            <MudButton Href="/Identity/Account/Register">Регистрация</MudButton>
                        </NotAuthorized>
                    </AuthorizeView>
                </MudButtonGroup>
            </MudAppBar>
            <MudDrawer @bind-Open="@_sidebarOpen" ClipMode="clipMode" Elevation="1" Height="100%" Width="350px" Variant="DrawerVariant.Temporary">
                <MudDrawerHeader>
                    <MudText Typo="Typo.h6">Program</MudText>
                </MudDrawerHeader>
                <MudNavMenu>
                    <MudTreeView T="string" @bind-SelectedValue="SelectedValue" Hover="true">
                        <MudTreeViewItem Value="@("Номенклатура")">
                            <MudTreeViewItem Value="@("Оборудование")" @onclick="@(() => NavManager.NavigateTo("equipment"))" />
                            <MudTreeViewItem Value="@("Типы оборудования")" @onclick="@(() => NavManager.NavigateTo("type"))" />
                            <MudTreeViewItem Value="@("Ответственные лица")" @onclick="@(() => NavManager.NavigateTo("person"))" />
                        </MudTreeViewItem>
                        <MudTreeViewItem Value="@("Отчеты")"></MudTreeViewItem>
                    </MudTreeView>
                </MudNavMenu>
            </MudDrawer>
            <MudMainContent Class="pt-16 px-16">
                <MudContainer Class="mt-6">
                    @Body
                </MudContainer>
            </MudMainContent>
        </MudLayout>

        <MudThemeProvider />
        <MudDialogProvider />
        <MudSnackbarProvider />
    </main>
</div>

@code {
    private bool _sidebarOpen = false;
    string SelectedValue { get; set; }
    DrawerClipMode clipMode = DrawerClipMode.Never;

    private void ToggleSidebar() => _sidebarOpen = !_sidebarOpen;
}
